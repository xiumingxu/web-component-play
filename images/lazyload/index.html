<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="styles.css">
    <title>Lazyload</title>
    <style>
        .gallery img{
            display: inline-block;
            width: 300px;
            height: 300px;
            object-fit: cover;
        }
        </style>
</head>
<body>
    <div class="gallery">
        <img src="https://via.placeholder.com/300" data-src="__/image0.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image1.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image2.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image3.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image4.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image5.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image6.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image7.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image8.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image9.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image10.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image11.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image12.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image13.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image14.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image15.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image16.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image17.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image18.jpg"/>        
        <img src="https://via.placeholder.com/300" data-src="__/image0.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image1.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image2.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image3.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image4.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image5.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image6.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image7.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image8.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image9.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image10.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image11.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image12.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image13.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image14.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image15.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image16.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image17.jpg"/>
        <img src="https://via.placeholder.com/300" data-src="__/image18.jpg"/>
    </div>
</body>
<script src="script.js"></script>
<script>
   loadImages();
  
    function loadImages(){
        // have an attribute of data-src
       
        // alert(imgs); 
        let imgs =[... document.querySelectorAll('img[data-src]')];
        // let img =
        let curScrollHeight = document.documentElement.scrollTop || document.body.scrollTop;
        let visibles = imgs.filter(img=>{
            // console.log(document.body.scrollTop);
            // 针对有scrollbar的元素说的
            // console.log(document.documentElement.scrollTop);
            // console.log(img.scrollTop);
            // console.log(img.offsetTop);
            // console.log(img.clientHeight);
            // console.log(window.innerHeight);
            // 仅window 有
            // console.log(window.pageYOffset);
            // console.log("");
            
            return img.offsetTop < curScrollHeight + window.innerHeight
        });
    
        visibles.forEach(img=>{
            // console.log(img.style.dataSrc)
            // console.log(img["data-src"]);
            setTimeout(()=>
            img.src = img.getAttribute("data-src"),
            1000);
        })
    };

    // window.scroll(()=>{
    //     console.log("scroll")
    // }
        
  
    window.addEventListener("scroll",()=>{
        // console.log("scroll");
        loadImages();
      }
    );


</script>
</html>