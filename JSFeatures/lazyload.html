<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style>
            .header, .panel{
                width: 100%;
             
            }
            .header{
                   height: 100px;
                   text-align: center;
                   line-height: 100px;
            }
            .panel{
                display: grid;
                /* grid-template-cols: 500px; */
                grid-template-rows: 500px;
                grid-template-columns: 1fr 1fr;
                grid-column-gap: 20px;
                grid-row-gap: 20px;
            }
            .image-wrapper{
                height: 500px;
                /* width: 500px; */
                background: red;
            }
            img{
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <header class="header"> Let's see</header>
            <div class="panel">
                   
                   
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>
                    <div class="image-wrapper"><img data-src="./rabbit.jpg" src="./preview"></div>

        </div>
    </body>
    <script>
        //lazy load
      

        let checkImage  = ()=>{
            let imgs = document.querySelectorAll('img');
            for(let i=0; i<imgs.length; i++){
                let img = imgs[i];
                if(isInView(img)){
                    loadImage(img)
                }
            }
        }


          checkImage();

          window.onscroll = throttle(checkImage);
          
          function throttle(fn, interval=300){
              let timer = null;
              return function(){
                  if(timer)
                    return;
                  fn.apply(this, arguments);
                  timer = setTimeout(()=>{
                      timer = null;
                  }, interval);
              }
          }
          function isInView(img) {
                let rect = img.getBoundingClientRect();
                if(rect.top < window.innerHeight + 200)
                    return true;
                return false;
            }
            function loadImage(img) {
                img.src = img.getAttribute('data-src');
            }
    </script>
</html>